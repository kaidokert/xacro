<?xml version="1.0"?>
<robot name="test" xmlns:xacro="http://www.ros.org/wiki/xacro">
  <xacro:macro name="inner_macro" params="name">
    <link name="${name}">
      <!-- Call print_location from inside nested macros -->
      <visual><origin xyz="0 0 ${xacro.print_location()}0"/></visual>
    </link>
  </xacro:macro>

  <xacro:macro name="outer_macro" params="prefix">
    <xacro:inner_macro name="${prefix}_link"/>
  </xacro:macro>

  <xacro:outer_macro prefix="test"/>
</robot>
